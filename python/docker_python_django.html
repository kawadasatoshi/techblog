
##注意
このサイトには詳しい動作の説明はありません。
代わりにソースと手順のみを載せました。



##docker-compose.yml
<code>
<pre>
djangoapp:
  user: root
  build: .
  dockerfile: "Dockerfile"
  environment:
    ENV: DEV
  ports:
   - "80:5000"
  volumes:
    - ./app:/app
    - ./God:/God
  command: ./cmd.sh
  #command: python3 manage.py runserver 0.0.0.0:5000 
  links:
    - redis
    - db

db:
  user: root
  image: mariadb
  command: mysqld --character-set-server=utf8 --collation-server=utf8_unicode_ci
  environment:
    MYSQL_ROOT_PASSWORD: rootpw
    MYSQL_DATABASE: stock_database
    MYSQL_USER: user
    MYSQL_PASSWORD: passw0rd
  ports:
    - "3306:3306"
  volumes:
    # 初期データを投入するSQLが格納されているdir
    - ./db/mysql-init:/docker-entrypoint-initdb.d
    # 永続化するときにマウントするdir
    - ./db/mysql-data:/var/lib/mysql
</pre>
</code>




##Dockerfile
<pre>
  <code>
FROM python

RUN groupadd -r uwsgi && useradd -r -g uwsgi uwsgi

EXPOSE 5000
WORKDIR /app
COPY app /app
COPY requirements.txt ./
COPY God /God

RUN pip install --upgrade pip
RUN pip install --upgrade setuptools
RUN pip install -r requirements.txt

USER root

CMD ["./cmd.sh"]
  </code>
</pre>



##requirements.txt

<pre>
  <code>
Django==3.1   # Django3.1
mysqlclient   # pythonでMySQLに接続するためのドライバ
beautifulsoup4
redis
oauth2client
gspread
django-hosts
mysqlclient
mysql-connector-python
PyGithub
google-ads
markdown
  </code>
</pre>



date:2021/7/7
title:dockerでpython(django)の環境を作る(サンプルあり)
description:詳しい説明よりもソースコードを優先したいあなたへ、dockerでpythonとdjangoの環境を作るためのソースコードと手順のみに絞ったサイトです。
